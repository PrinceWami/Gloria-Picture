"use strict";var GloriaJS=GloriaJS||{};GloriaJS.pictures=(()=>{let t;document.addEventListener("DOMContentLoaded",(()=>{t=document.getElementsByClassName("gl-picture");for(const e of t){""==e.getAttribute("title")&&e.setAttribute("title","Click to select a picture..."),e.style.cursor="pointer";const t=document.createElement("input");t.type="file",t.accept="image/*",t.setAttribute("hidden","hidden"),document.body.appendChild(t);let l=document.createElement("input");if(null!=document.getElementById(e.dataset.glSave)&&(l.type="hidden",l.name=e.getAttribute("name"),document.getElementById(e.dataset.glSave).appendChild(l)),null!=e.dataset.glProtect&&("true"==e.dataset.glProtect.toLowerCase()||"protect"==e.dataset.glProtect.toLowerCase())){e.style.cursor="default";const t=document.createElement("div");t.style.width=e.style.width,null!=e.getAttribute("width")&&(t.setAttribute("width",e.getAttribute("width")),t.style.width=t.getAttribute("width")+"px"),t.style.height=e.style.height,null!=e.getAttribute("height")&&(t.setAttribute("height",e.getAttribute("height")),t.style.height=t.getAttribute("height")+"px"),t.style.backgroundColor="#00000000","block"==e.style.display?(t.style.display="block",t.style.marginTop="-"+t.style.height):(t.style.display="inline-block",t.style.marginLeft="-"+t.style.width),e.after(t)}e.addEventListener("click",(()=>{t.click()})),t.addEventListener("change",(t=>{let a=new FileReader;a.onload=function(t){"img"==e.tagName.toLowerCase()?(e.setAttribute("value",t.target.result),e.setAttribute("src",t.target.result),null!=document.getElementById(e.dataset.glTarget)&&document.getElementById(e.dataset.glTarget).setAttribute("src",t.target.result),null!=document.getElementById(e.dataset.glSave)&&(l.value=t.target.result.toString())):"a"==e.tagName.toLowerCase()||"button"==e.tagName.toLowerCase()?(null!=document.getElementById(e.dataset.glTarget)&&(document.getElementById(e.dataset.glTarget).setAttribute("src",t.target.result),document.getElementById(e.dataset.glTarget).setAttribute("value",t.target.result)),null!=document.getElementById(e.dataset.glSave)&&(l.value=t.target.result.toString(),l.click())):"div"!=e.tagName.toLocaleLowerCase()?(null!=document.getElementById(e.dataset.glTarget)&&document.getElementById(e.dataset.glTarget).setAttribute("src",t.target.result),null!=document.getElementById(e.dataset.glSave)&&(l.value=t.target.result.toString())):(e.style.backgroundImage="url("+t.target.result+")",e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.backgroundPositionY="center")},a.readAsDataURL(t.target.files[0])}))}}))})();